
{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missideh Bourou</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/client/home_page.css'%}">

</head>
<body>
      <header class="navbar">
    <div class="nav-content">
      <a class="logo" href="{% url 'Bapp:home_page'%}" style="text-decoration:none;">
        <img src="{% static 'images/logo_b289906d-56b1-44f8-8472-a5fb7bc4947f.png'%}"
             alt="Logo"
             class="logo-img">
         <div>
            <span class="name">Missideh Bourou</span>
            <span class="domaine">.online</span>
        </div>
      </a>
      <nav class="nav-links" id="nav-links">
        <a href="{% url 'Bapp:missideh_bourou_members'%}">Membres</a>
        <a href="{% url 'Bapp:telegram_otp_login'%}">Whatsapp</a>
          <label for="country">Pays:</label>
            <select class="country" name="country" id="country">
                <option value="Guinee">Guinée</option>
                <option value="senegal">Sénégal</option>
                <option value="ci"> Côte d'Ivoire</option>
                <option value="eu">Europe</option>
                <option value="usa">USA</option>
            </select>

        <a href="{% url 'Bapp:member_login_view'%}" class="auth-btn">S'authentifier</a>
      </nav>
      <button class="hamburger" id="hamburger" aria-label="Menu">
        <i class="fas fa-bars"></i>
        <i class="fas fa-times"></i>
      </button>
    </div>
  </header>
   <section class="hero">
    <div class="hero-container">
      <!-- Texte -->
      <div class="hero-text">
        <h1>Missideh Bourou ko fii Fow</h1>
          <section class="section1">

          <h2>Qui sommes-nous ?</h2>
          <p>
            L’association <strong>Missideh-Bourou</strong> est née de la volonté de femmes et d’hommes engagés pour
            l’entraide, l’éducation et l’amélioration des conditions de vie.
            Elle place l’humain au cœur de ses actions pour un développement inclusif et durable.
          </p>

          <h2>Nos actions</h2>
          <ul>
            <li>Campagnes de sensibilisation dans les écoles et villages</li>
            <li>Formations en artisanat, agriculture et entrepreneuriat</li>
            <li>Programmes de soutien scolaire pour les enfants défavorisés</li>
            <li>Collecte et redistribution de biens essentiels</li>
            <li>Événements culturels pour rassembler la communauté</li>
          </ul>
          <h2>Pourquoi nous soutenir ?</h2>
          <p>
            En rejoignant Missideh-Bourou, vous contribuez à bâtir une société plus équitable et solidaire.
            Chaque geste compte, qu’il s’agisse de :
          </p>
          <h2>Notre vision</h2>
          <p>
            Nous aspirons à une société où chaque individu, sans distinction, peut s’épanouir et contribuer activement
            au développement collectif. Une société où la solidarité est une réalité vécue au quotidien.
          </p>
        </section>

      </div>
      <!-- Carrousel -->
      <div class="hero-image">
        <div id="loader" class="loader"></div>
        <div class="swiper" aria-label="Carrousel d'images">
          <div class="swiper-wrapper" id="carousel"></div>
          <div class="swiper-pagination"></div>
          <div class="swiper-button-next" aria-label="Suivant"></div>
          <div class="swiper-button-prev" aria-label="Précédent"></div>
        </div>
      </div>
      <!-- CTA déplacé à la fin -->
      <div class="hero-cta">
        <a href="{% url 'Bapp:member_login_view'%}" class="btn-primary">
          Rejoindre en tant que membre
          <i class="fa-solid fa-arrow-right"></i>
        </a>
      </div>
    </div>
  </section>


<!-- Swiper.js -->
<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>



  <footer class="footer">
    <div class="footer-content">
      <h2>À propos</h2>
      <p>Une communauté engagée pour le partage et l'entraide.</p>
      <div class="footer-socials">
        <a href="#"><i class="fab fa-html5"></i></a>
        <a href="#"><i class="fab fa-google"></i></a>
        <a href="#"><i class="fab fa-facebook"></i></a>
      </div>
      <p class="footer-copy">© 2025 Missideh Bourou. Tous droits réservés.</p>
    </div>
  </footer>


  <script>
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('nav-links');
    const body = document.body;

    hamburger.addEventListener('click', (e) => {
      e.stopPropagation();
      hamburger.classList.toggle('active');
      navLinks.classList.toggle('active');
      // Empêcher le défilement du body quand le menu est ouvert
      body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
    });

    // Fermer le menu lors du clic sur un lien
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', () => {
        hamburger.classList.remove('active');
        navLinks.classList.remove('active');
        body.style.overflow = '';
      });
    });

    // Fermer le menu lors du clic en dehors
    document.addEventListener('click', (e) => {
      if (navLinks.classList.contains('active') &&
          !navLinks.contains(e.target) &&
          !hamburger.contains(e.target)) {
        hamburger.classList.remove('active');
        navLinks.classList.remove('active');
        body.style.overflow = '';
      }
    });
  </script>
  <script>
       async function chargerImages() {
    const baseUrl = window.location.origin;
    const response = await fetch(`${baseUrl}/api/images/`);
    const data = await response.json();
    const carousel = document.getElementById("carousel");
    const loader = document.getElementById("loader");
    const swiperContainer = document.querySelector(".swiper");

    // On vide d'abord le carousel
    carousel.innerHTML = "";

    // Si pas d’images → afficher un message
    if (!data.length) {
      loader.style.display = "none";
      swiperContainer.style.display = "flex";
      carousel.innerHTML = `<div class="swiper-slide"><div class="caption">Aucune image disponible</div></div>`;
      return;
    }

    // Ajout des images
    data.forEach(img => {
      const slide = document.createElement("div");
      slide.classList.add("swiper-slide");

      slide.innerHTML = `
        <img
          src="${img.fichier}"
          srcset="
            ${img.fichier_thumbnail} 300w,
            ${img.fichier_mobile} 800w,
            ${img.fichier} 1200w
          "
          sizes="(max-width: 600px) 100vw,
                 (max-width: 1024px) 90vw,
                 1200px"
          alt="${img.titre}">
        <div class="caption">${img.titre || "Sans titre"}</div>
      `;

      carousel.appendChild(slide);
    });

    // Masquer le loader et afficher le carrousel
    loader.style.display = "none";
    swiperContainer.style.display = "block";

    // Initialiser Swiper avec paramètres robustes mobile/tablette
    const maxBullets = 10;

const swiper = new Swiper(".swiper", {
  loop: true,
  speed: 600,
  centeredSlides: true,
  spaceBetween: 10,

  autoplay: {
    delay: 4000,
    disableOnInteraction: false,
    pauseOnMouseEnter: false
  },

  pagination: {
    el: ".swiper-pagination",
    clickable: true,
    renderBullet: function (index, className) {
      // on récupère l'index actif de Swiper
      let activeIndex = this.realIndex;
      let start = Math.floor(activeIndex / maxBullets) * maxBullets;
      let end = start + maxBullets;

      if (index >= start && index < end) {
        return '<span class="' + className + '">' + (index + 1) + "</span>";
      }
      return "";
    }
  },

  navigation: {
    nextEl: ".swiper-button-next",
    prevEl: ".swiper-button-prev"
  },

  observer: true,
  observeParents: true,
  watchSlidesProgress: true,
  updateOnWindowResize: true,
  preloadImages: true,

  allowTouchMove: true,
  touchStartPreventDefault: false,
  passiveListeners: true,

  breakpoints: {
    0:   { slidesPerView: 1 },
    640: { slidesPerView: 1 },
    1024:{ slidesPerView: 1 }
  }
});

// Mise à jour des bullets à chaque changement de slide
swiper.on("slideChange", () => {
  swiper.pagination.render();
  swiper.pagination.update();
});

// Force le démarrage autoplay après init
try { swiper.autoplay.start(); } catch(e) {}

    // Force le démarrage autoplay après init (certains mobiles le suspendent)
    try { swiper.autoplay.start(); } catch(e) {}
  }
    console.log('Document changé.');
  document.addEventListener("DOMContentLoaded", chargerImages);


  </script>


</body>
</html>